{"ast":null,"code":"import axios from \"axios\";\nimport moment from \"moment\";\nconst URL = \"http://localhost:3003\";\nexport default {\n  data() {\n    return {\n      ordData: [],\n      orderStatus: [\"Pendente de confirmação\", \"Pedido confirmado\", \"Não reconhece o pedido\", \"Mercadoria não recebida\", \"Recebida com avaria\", \"Devolvida\", \"Recebida com devolução parcial\", \"Recebida e confirmada\", \"Pagamento Autorizado\"]\n    };\n  },\n\n  async created() {\n    const getOrders = await axios.get(`${URL}/orders`);\n    this.ordData = getOrders.data;\n  },\n\n  methods: {\n    format_date(value) {\n      if (value) {\n        const newData = moment(String(value)).format(\"L\");\n        return newData;\n      }\n    },\n\n    async find_buyer(id) {\n      const buyer = await axios.get(`${URL}/buyers/${id}`);\n      return buyer.data[0].name;\n    }\n\n  },\n  computed: {\n    allOrd() {\n      const formatedOrd = Promise.all(this.ordData.map(async ord => ({ ...ord,\n        emissionDate: this.format_date(ord.emissionDate),\n        value: parseInt(ord.value).toLocaleString(\"pt-br\", {\n          style: \"currency\",\n          currency: \"BRL\"\n        }),\n        orderStatusBuyer: this.orderStatus[parseInt(ord.orderStatusBuyer)],\n        buyerId: await this.find_buyer(ord.buyerId)\n      })));\n      return formatedOrd;\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAoDA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AAEA,MAAMC,GAAE,GAAI,uBAAZ;AAEA,eAAe;EACbC,IAAI,GAAG;IACL,OAAO;MACLC,OAAO,EAAE,EADJ;MAELC,WAAW,EAAE,CACX,yBADW,EAEX,mBAFW,EAGX,wBAHW,EAIX,yBAJW,EAKX,qBALW,EAMX,WANW,EAOX,gCAPW,EAQX,uBARW,EASX,sBATW;IAFR,CAAP;EAcD,CAhBY;;EAiBb,MAAMC,OAAN,GAAgB;IACd,MAAMC,SAAQ,GAAI,MAAMP,KAAK,CAACQ,GAAN,CAAW,GAAEN,GAAI,SAAjB,CAAxB;IACA,KAAKE,OAAL,GAAeG,SAAS,CAACJ,IAAzB;EACD,CApBY;;EAqBbM,OAAO,EAAE;IACPC,WAAW,CAACC,KAAD,EAAQ;MACjB,IAAIA,KAAJ,EAAW;QACT,MAAMC,OAAM,GAAIX,MAAM,CAACY,MAAM,CAACF,KAAD,CAAP,CAAN,CAAsBG,MAAtB,CAA6B,GAA7B,CAAhB;QACA,OAAOF,OAAP;MACF;IACD,CANM;;IAQP,MAAMG,UAAN,CAAiBC,EAAjB,EAAqB;MACnB,MAAMC,KAAI,GAAI,MAAMjB,KAAK,CAACQ,GAAN,CAAW,GAAEN,GAAI,WAAUc,EAAG,EAA9B,CAApB;MACA,OAAOC,KAAK,CAACd,IAAN,CAAW,CAAX,EAAce,IAArB;IACD;;EAXM,CArBI;EAkCbC,QAAQ,EAAE;IACRC,MAAM,GAAG;MACP,MAAMC,WAAU,GAAIC,OAAO,CAACC,GAAR,CAClB,KAAKnB,OAAL,CAAaoB,GAAb,CAAiB,MAAOC,GAAP,KAAgB,EAC/B,GAAGA,GAD4B;QAE/BC,YAAY,EAAE,KAAKhB,WAAL,CAAiBe,GAAG,CAACC,YAArB,CAFiB;QAG/Bf,KAAK,EAAEgB,QAAQ,CAACF,GAAG,CAACd,KAAL,CAAR,CAAoBiB,cAApB,CAAmC,OAAnC,EAA4C;UACjDC,KAAK,EAAE,UAD0C;UAEjDC,QAAQ,EAAE;QAFuC,CAA5C,CAHwB;QAO/BC,gBAAgB,EAAE,KAAK1B,WAAL,CAAiBsB,QAAQ,CAACF,GAAG,CAACM,gBAAL,CAAzB,CAPa;QAQ/BC,OAAO,EAAE,MAAM,KAAKjB,UAAL,CAAgBU,GAAG,CAACO,OAApB;MARgB,CAAhB,CAAjB,CADkB,CAApB;MAaA,OAAOX,WAAP;IACD;;EAhBO;AAlCG,CAAf","names":["axios","moment","URL","data","ordData","orderStatus","created","getOrders","get","methods","format_date","value","newData","String","format","find_buyer","id","buyer","name","computed","allOrd","formatedOrd","Promise","all","map","ord","emissionDate","parseInt","toLocaleString","style","currency","orderStatusBuyer","buyerId"],"sourceRoot":"","sources":["/home/isaac/myProjects/cashforce/cashforce-ft/src/components/OrdersPage.vue"],"sourcesContent":["<template>\n  <div class=\"container-fluid\">\n    <div class=\"row\">\n      <div class=\"col-2\">\n        <p>Logotipo</p>\n        <button class=\"btn btn-sn bg-primary\">notasFiscais</button>\n      </div>\n      <div class=\"col\">\n        <div class=\"container card\">\n          <div class=\"row\">\n            <h3>Notas Fiscais</h3>\n            <p>Visualize as notas fiscais que você tem.</p>\n          </div>\n          <div class=\"row\">\n            <table class=\"table\">\n              <thead>\n                <tr>\n                  <th scope=\"col\">NOTA FISCAL</th>\n                  <th scope=\"col\">SACADO</th>\n                  <th scope=\"col\">CEDENTE</th>\n                  <th scope=\"col\">EMISSÃO</th>\n                  <th scope=\"col\">VALOR</th>\n                  <th scope=\"col\">STATUS</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"(d, i) in allOrd\" v-bind:key=\"i\">\n                  <td>{{ d.orderNfId }}</td>\n                  <td>{{ d.buyerId }}</td>\n                  <td>{{ d.providerId }}</td>\n                  <td>{{ d.emissionDate }}</td>\n                  <td>{{ d.value }}</td>\n                  <td>{{ d.orderStatusBuyer }}</td>\n                  <td>\n                    <button\n                      type=\"button\"\n                      class=\"btn btn-outline-secondary btn-sm\"\n                    >\n                      Dados do Cedente\n                    </button>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport moment from \"moment\";\n\nconst URL = \"http://localhost:3003\";\n\nexport default {\n  data() {\n    return {\n      ordData: [],\n      orderStatus: [\n        \"Pendente de confirmação\",\n        \"Pedido confirmado\",\n        \"Não reconhece o pedido\",\n        \"Mercadoria não recebida\",\n        \"Recebida com avaria\",\n        \"Devolvida\",\n        \"Recebida com devolução parcial\",\n        \"Recebida e confirmada\",\n        \"Pagamento Autorizado\",\n      ],\n    };\n  },\n  async created() {\n    const getOrders = await axios.get(`${URL}/orders`);\n    this.ordData = getOrders.data;\n  },\n  methods: {\n    format_date(value) {\n      if (value) {\n        const newData = moment(String(value)).format(\"L\");\n        return newData;\n      }\n    },\n\n    async find_buyer(id) {\n      const buyer = await axios.get(`${URL}/buyers/${id}`);\n      return buyer.data[0].name;\n    },\n  },\n  computed: {\n    allOrd() {\n      const formatedOrd = Promise.all(\n        this.ordData.map(async (ord) => ({\n          ...ord,\n          emissionDate: this.format_date(ord.emissionDate),\n          value: parseInt(ord.value).toLocaleString(\"pt-br\", {\n            style: \"currency\",\n            currency: \"BRL\",\n          }),\n          orderStatusBuyer: this.orderStatus[parseInt(ord.orderStatusBuyer)],\n          buyerId: await this.find_buyer(ord.buyerId),\n        }))\n      );\n\n      return formatedOrd;\n    },\n  },\n};\n</script>\n\n<style>\ndiv {\n  border: 1px solid red;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}